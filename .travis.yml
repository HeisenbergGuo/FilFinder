language: python

sudo: false

python:
    - 2.7

# The apt packages below are needed for sphinx builds. A full list of packages
# that can be included can be found here:
#
# https://github.com/travis-ci/apt-package-whitelist/blob/master/ubuntu-precise

addons:
    apt:
        packages:
            - graphviz
            - texlive-latex-extra
            - dvipng

env:
    global:
        - SETUP_CMD='test'
        - CONDA_ADDITIONAL='scipy matplotlib networkx scikit-image h5py'
        - NP_VER=1.10
        - ASTRO_VER=1.0
    matrix:
        - SETUP_CMD='egg_info'

matrix:
    include:
        # Check for sphinx doc build warnings - we do this first because it
        # may run for a long time
        - python: 2.7
          env: SETUP_CMD='build_sphinx -w'

        - python: 2.7
          env: NP_VER=1.9 ASTRO_VER=1.0

        - python: 2.7
          env: NP_VER=1.10 ASTRO_VER=1.0

        - python: 2.7
          env: NP_VER=1.10 ASTRO_VER=1.1

install:
    - git clone git://github.com/astropy/ci-helpers.git
    - source ci-helpers/travis/setup_conda_$TRAVIS_OS_NAME.sh


script:
    - python setup.py $SETUP_CMD